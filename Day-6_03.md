The SQL Foreign Key

In SQL, a Foreign Key is a column in one table that refers to the Primary Key in another table, creating a connection between the two tables.

A foreign key ensures referential integrity by making sure that the relationship between the tables remains valid

A foreign key can reference the unique key of any table in the database. The table containing the primary key is called the parent table, while the table containing the foreign key is called the child table.


<img width="672" height="318" alt="image" src="https://github.com/user-attachments/assets/dfd6b258-cdb5-4aea-b3b6-d99d97113beb" />


Features:

A Foreign Key is used to reduce the redundancy (or duplicates) in the table.
It helps to normalize (or organize the data in a database) the data in multiple tables.
It establishes a link between two tables, where the child table refers to the parent table.
It ensures referential integrity by making sure that a value in the child table must exist in the parent table.
It prevents inserting invalid data into the foreign key column.
It restricts deletion or update of a record in the parent table if related rows exist in the child table (unless cascading options are defined).
A table can have more than one foreign key, allowing it to connect with multiple parent tables.

Syntax
There are several syntaxes to create or add a foreign key in a table.

Create a table with a foreign key on a single column:

CREATE TABLE child_table (
    column1 datatype PRIMARY KEY,
    column2 datatype,
    column3 datatype,
    FOREIGN KEY (column2) REFERENCES parent_table(parent_column)
);
Create a table with a composite foreign key (multiple columns):

CREATE TABLE child_table (
    column1 datatype,
    column2 datatype,
    column3 datatype,
    PRIMARY KEY (column1),
    FOREIGN KEY (column2, column3) REFERENCES parent_table(parent_col1, parent_col2)
);
Add a foreign key to an existing table:

ALTER TABLE child_table
ADD CONSTRAINT fk_child_parent FOREIGN KEY (column_name)
REFERENCES parent_table(parent_column);




Example
Let us create two tables with the names CUSTOMERS and ORDERS. The following query creates a table with the name CUSTOMERS:

CREATE TABLE CUSTOMERS(
   ID INT NOT NULL,
   NAME VARCHAR (20) NOT NULL,
   AGE INT NOT NULL,
   ADDRESS CHAR (25) ,
   SALARY DECIMAL (18, 2),       
   PRIMARY KEY (ID)
);



CREATE TABLE ORDERS (
   ID INT NOT NULL,
   DATE DATETIME, 
   CUSTOMER_ID INT,
   CONSTRAINT FK_CUSTOMER 
   FOREIGN KEY(CUSTOMER_ID) 
   REFERENCES CUSTOMERS(ID),
   AMOUNT DECIMAL,
   PRIMARY KEY (ID)
);



DROP TABLE CUSTOMERS; 



SQL Composite Foreign Key
A Composite Foreign Key is a foreign key that consists of two or more columns. It makes sure that the combination of values in these columns matches values in a composite primary key of another table.

Example
In this example, we are creating a table ORDER_DETAILS where the combination of ORDER_ID and PRODUCT_ID is defined as a foreign key referencing the composite primary key in the ORDERS_PRODUCTS table:



CREATE TABLE ORDER_DETAILS (
   ORDER_ID INT NOT NULL,
   PRODUCT_ID INT NOT NULL,
   QUANTITY INT,
   FOREIGN KEY (ORDER_ID, PRODUCT_ID) REFERENCES ORDERS_PRODUCTS(ORDER_ID, PRODUCT_ID)
);



ALTER TABLE ORDERS 
ADD CONSTRAINT FK_ORDERS 
FOREIGN KEY(ID) 
REFERENCES CUSTOMERS(ID);

DROP TABLE CUSTOMERS;



ALTER TABLE ORDERS DROP FOREIGN KEY FK_ORDERS;



DROP TABLE CUSTOMERS;


<img width="715" height="201" alt="image" src="https://github.com/user-attachments/assets/c6513c34-3400-481d-af3a-bfcd53d664bd" />




Important Points About SQL FOREIGN KEY
Following are the important points you should remember about the SQL FOREIGN KEY Constraint:

A foreign key in one table points to a primary key in another table.
Foreign keys ensure referential integrity of the data.
A table can have multiple foreign keys, but each must reference a valid primary key or unique key in another table.
You cannot insert a value in a foreign key column that does not exist in the referenced primary key column.
Foreign keys can be defined with actions like ON DELETE CASCADE or ON UPDATE CASCADE to automatically propagate changes.





