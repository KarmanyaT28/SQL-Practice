The SQL Primary Key

A Primary Key in SQL is a column (or a combination of columns) that uniquely identifies each row in a table. It ensures that no two rows have the same value in the primary key column(s) and that the value cannot be NULL.

Each table can have only one primary key, but that primary key may consist of multiple columns (known as a composite primary key).


Properties of SQL Primary Key
Following are some of the important properties of SQL PRIMARY KEY:

It contains only a unique value.
It can not be null.
One table can have only one Primary Key.
A primary key length cannot be more than 900 bytes.



Syntax
There are several syntaxes to create or add a primary key in a table.

Create a table with a primary key on a single column:

CREATE TABLE table_name (
    column1 datatype PRIMARY KEY,
    column2 datatype,
    column3 datatype
);
Create a table with a composite primary key (multiple columns):

CREATE TABLE table_name (
    column1 datatype,
    column2 datatype,
    column3 datatype,
    PRIMARY KEY (column1, column2)
);
    
Add a primary key to an existing table:

ALTER TABLE table_name
ADD CONSTRAINT pk_table PRIMARY KEY (column_name);





Example
In the following example, we are trying to create a table with the name CUSTOMERS with various fields in an SQL database. While creating the table, we will add the constraint "PRIMARY KEY" on the column named ID:

CREATE TABLE CUSTOMERS (
   ID INT NOT NULL,
   NAME VARCHAR (20) NOT NULL,
   AGE INT NOT NULL,
   ADDRESS CHAR (25),
   SALARY DECIMAL (18, 2),       
   PRIMARY KEY (ID)
);



Verification
As we know primary key value must be unique, so you can not insert the record with the same ID. Here, we will verify the constraint created on the ID column, by inserting records with duplicate ID values.

First of all, let's insert a record into the CUSTOMERS table:

INSERT INTO CUSTOMERS VALUES
(3, 'Kaushik', 23, 'Kota', 2000.00); 


INSERT INTO CUSTOMERS VALUES 
(3, 'Chaitali', 25, 'Mumbai', 6500.00);

SQL Composite Primary Key
A Composite Primary Key is a primary key made up of two or more columns. It makes sure that the combination of values across these columns is unique for each row, even if the individual column values are not unique by themselves.

Composite primary keys are often used in junction tables (many-to-many relationships) or when a single column is not sufficient to uniquely identify a record.




Example
In this example, we are creating a table ORDERS where the combination of ORDER_ID and PRODUCT_ID forms the primary key:



Verification
Now, let us insert some records to see how the composite primary key works:

INSERT INTO ORDERS VALUES (101, 5001, 2);
INSERT INTO ORDERS VALUES (101, 5002, 1);

INSERT INTO ORDERS VALUES (101, 5001, 3);


SQL Primary Key on an Existing Column
You can also add the PRIMARY KEY constraint on an existing column of a table using the ALTER TABLE statement. This is useful when the table is already created but does not yet have a primary key defined.

Example
In this example, we are adding the PRIMARY KEY constraint on the NAME column of the existing CUSTOMERS table:


ALTER TABLE CUSTOMERS ADD CONSTRAINT PRIMARY KEY(NAME);


ALTER TABLE CUSTOMERS DROP PRIMARY KEY;


INSERT INTO CUSTOMERS VALUES 
(3, 'Chaitali', 25, 'Mumbai', 6500.00 ),
(3, 'Hardik', 27, 'Bhopal', 8500.00 ),
(3, 'Komal', 22, 'Hyderabad', 4500.00 ),
(3, 'Muffy', 24, 'Indore', 10000.00 );





